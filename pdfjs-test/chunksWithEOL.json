[{"str":"Our implementation does not extend at all side exits. It extends","dir":"ltr","width":227.14581120000003,"height":8.9664,"transform":[8.9664,0,0,8.9664,65.9552,712.0299],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"only if the side exit is for a control-flow branch, and only if the side","dir":"ltr","width":239.10698880000018,"height":8.9664,"transform":[8.9664,0,0,8.9664,54.00000000000001,702.0672],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"exit does not leave the loop. In particular we do not want to extend","dir":"ltr","width":239.10698880000004,"height":8.9664,"transform":[8.9664,0,0,8.9664,54.00000000000001,692.1046],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"a trace tree along a path that leads to an outer loop, because we","dir":"ltr","width":239.10698880000018,"height":8.9664,"transform":[8.9664,0,0,8.9664,54.00000000000001,682.142],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"want to cover such paths in an outer tree through tree","dir":"ltr","width":190.38357120000012,"height":8.9664,"transform":[8.9664,0,0,8.9664,54.00000000000001,672.1793],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"nesting","dir":"ltr","width":25.903929600000005,"height":8.9664,"transform":[8.9664,0,0,8.9664,246.623,672.1793],"fontName":"g_d0_f10","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.668,"descent":-0.193,"vertical":false}},{"str":".","dir":"ltr","width":2.2416000000000005,"height":8.9664,"transform":[8.9664,0,0,8.9664,272.5266,672.1793],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"3.3","dir":"ltr","width":11.208000000000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,654.6451],"fontName":"g_d0_f1","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.69,"descent":-0.209,"vertical":false}},{"str":"Blacklisting","dir":"ltr","width":45.34308480000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,74.17439999999996,654.6451],"fontName":"g_d0_f1","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.69,"descent":-0.209,"vertical":false}},{"str":"Sometimes, a program follows a path that cannot be compiled","dir":"ltr","width":239.10698880000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,640.6973999999999],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"into a trace, usually because of limitations in the implementation.","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,630.7346999999999],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"TraceMonkey does not currently support recording throwing and","dir":"ltr","width":239.1069888000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,620.7720999999999],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"catching of arbitrary exceptions. This design trade off was chosen,","dir":"ltr","width":239.10698880000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,610.8095],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"because exceptions are usually rare in JavaScript. However, if a","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,600.8467999999999],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"program opts to use exceptions intensively, we would suddenly","dir":"ltr","width":239.10698880000004,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,590.8842],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"incur a punishing runtime overhead if we repeatedly try to record","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,580.9214999999999],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"a trace for this path and repeatedly fail to do so, since we abort","dir":"ltr","width":239.10698880000018,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,570.9589],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"tracing every time we observe an exception being thrown.","dir":"ltr","width":207.07004160000008,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,560.9963],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"As a result, if a hot loop contains traces that always fail, the VM","dir":"ltr","width":227.14581120000008,"height":8.9664,"transform":[8.9664,0,0,8.9664,65.95519999999998,551.0336],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"could potentially run much more slowly than the base interpreter:","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,541.071],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"the VM repeatedly spends time trying to record traces, but is never","dir":"ltr","width":239.1069888000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,531.1083],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"able to run any. To avoid this problem, whenever the VM is about","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,521.1457],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"to start tracing, it must try to predict whether it will finish the trace.","dir":"ltr","width":239.10698880000012,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,511.1831],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"Our prediction algorithm is based on","dir":"ltr","width":139.65168,"height":8.9664,"transform":[8.9664,0,0,8.9664,65.95519999999998,501.22040000000004],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"blacklisting","dir":"ltr","width":41.66686080000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,209.43129999999996,501.22040000000004],"fontName":"g_d0_f10","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.668,"descent":-0.193,"vertical":false}},{"str":"traces that","dir":"ltr","width":38.17893120000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,254.92109999999997,501.22040000000004],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"have been tried and failed. When the VM fails to finish a trace start-","dir":"ltr","width":239.10698880000004,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,491.25780000000003],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"ing at a given point, the VM records that a failure has occurred. The","dir":"ltr","width":239.10698880000018,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,481.29510000000005],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"VM also sets a counter so that it will not try to record a trace starting","dir":"ltr","width":239.10698880000027,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,471.33250000000004],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"at that point until it is passed a few more times (32 in our imple-","dir":"ltr","width":239.10698880000012,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,461.36990000000003],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"mentation). This","dir":"ltr","width":60.1286784,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,451.40720000000005],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"backoff","dir":"ltr","width":25.966694400000016,"height":8.9664,"transform":[8.9664,0,0,8.9664,117.22609999999997,451.40720000000005],"fontName":"g_d0_f10","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.668,"descent":-0.193,"vertical":false}},{"str":"counter gives temporary conditions that","dir":"ltr","width":145.5067392,"height":8.9664,"transform":[8.9664,0,0,8.9664,147.59749999999997,451.40720000000005],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"prevent tracing a chance to end. For example, a loop may behave","dir":"ltr","width":239.10698880000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,441.44460000000004],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"differently during startup than during its steady-state execution. Af-","dir":"ltr","width":239.10698880000004,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,431.48190000000005],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"ter a given number of failures (2 in our implementation), the VM","dir":"ltr","width":239.10698880000015,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,421.51930000000004],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"marks the fragment as blacklisted, which means the VM will never","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,411.55670000000003],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"again start recording at that point.","dir":"ltr","width":120.98363520000004,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,401.59400000000005],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"After implementing this basic strategy, we observed that for","dir":"ltr","width":227.1458112000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,65.95519999999998,391.63140000000004],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"small loops that get blacklisted, the system can spend a noticeable","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,381.66870000000006],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"amount of time just finding the loop fragment and determining that","dir":"ltr","width":239.10698880000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,371.70610000000005],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"it has been blacklisted. We now avoid that problem by patching the","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,361.74350000000004],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"bytecode. We define an extra no-op bytecode that indicates a loop","dir":"ltr","width":239.10698880000012,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,351.78080000000006],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"header. The VM calls into the trace monitor every time the inter-","dir":"ltr","width":239.10698880000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,341.81820000000005],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"preter executes a loop header no-op. To blacklist a fragment, we","dir":"ltr","width":239.10698880000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,331.85550000000006],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"simply replace the loop header no-op with a regular no-op. Thus,","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,321.89290000000005],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"the interpreter will never again even call into the trace monitor.","dir":"ltr","width":225.59462400000004,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,311.93030000000005],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"There is a related problem we have not yet solved, which occurs","dir":"ltr","width":227.14581120000014,"height":8.9664,"transform":[8.9664,0,0,8.9664,65.95519999999998,301.96760000000006],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"when a loop meets all of these conditions:","dir":"ltr","width":150.67138560000004,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999998,292.00500000000005],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"The VM can form at least one root trace for the loop.","dir":"ltr","width":190.24010880000014,"height":8.9664,"transform":[8.9664,0,0,8.9664,66.95139999999998,277.1606000000001],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"There is at least one hot side exit for which the VM cannot","dir":"ltr","width":226.1505408000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,66.95139999999998,263.2129000000001],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"complete a trace.","dir":"ltr","width":60.99841920000003,"height":8.9664,"transform":[8.9664,0,0,8.9664,66.95139999999998,253.2503000000001],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"The loop body is short.","dir":"ltr","width":82.93920000000004,"height":8.9664,"transform":[8.9664,0,0,8.9664,66.95139999999998,239.3026000000001],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"In this case, the VM will repeatedly pass the loop header, search","dir":"ltr","width":227.14581120000022,"height":8.9664,"transform":[8.9664,0,0,8.9664,65.95509999999997,224.4583000000001],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"for a trace, find it, execute it, and fall back to the interpreter.","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,214.49570000000008],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"With a short loop body, the overhead of finding and calling the","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,204.53300000000007],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"trace is high, and causes performance to be even slower than the","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,194.57040000000006],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"basic interpreter. So far, in this situation we have improved the","dir":"ltr","width":239.10698880000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,184.60770000000005],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"implementation so that the VM can complete the branch trace.","dir":"ltr","width":239.10698880000015,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,174.64510000000004],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"But it is hard to guarantee that this situation will never happen.","dir":"ltr","width":239.10698880000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,164.68250000000003],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"As future work, this situation could be avoided by detecting and","dir":"ltr","width":239.10698880000024,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,154.71980000000002],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"blacklisting loops for which the average trace call executes few","dir":"ltr","width":239.10698880000012,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,144.7572],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"bytecodes before returning to the interpreter.","dir":"ltr","width":159.86194560000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,134.7945],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"Figure 7 shows basic trace tree compilation (11) applied to a nested","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,98.3313],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"loop where the inner loop contains two paths. Usually, the inner","dir":"ltr","width":239.10698880000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,88.3686],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"loop (with header at","dir":"ltr","width":71.66843520000003,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.99999999999997,78.406],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"i","dir":"ltr","width":3.1561728000000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,127.81409999999997,78.406],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":") becomes hot first, and a trace tree is rooted","dir":"ltr","width":157.987968,"height":8.9664,"transform":[8.9664,0,0,8.9664,135.11849999999998,78.406],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"at that point. For example, the first recorded trace may be a cycle","dir":"ltr","width":239.1069888000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,53.999999999999986,68.44340000000001],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"Figure 5.","dir":"ltr","width":35.56970879999999,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,562.3497],"fontName":"g_d0_f1","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.69,"descent":-0.209,"vertical":false}},{"str":"A tree with two traces, a trunk trace and one branch","dir":"ltr","width":199.0540800000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,357.06789999999995,562.3497],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"trace. The trunk trace contains a guard to which a branch trace was","dir":"ltr","width":239.10698880000032,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,552.3871],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"attached. The branch trace contain a guard that may fail and trigger","dir":"ltr","width":239.10698880000018,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,542.4244],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"a side exit. Both the trunk and the branch trace loop back to the tree","dir":"ltr","width":239.10698880000018,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,532.4618],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"anchor, which is the beginning of the trace tree.","dir":"ltr","width":170.32573440000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,522.4992000000001],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"Figure 6.","dir":"ltr","width":35.87456639999998,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,293.7402],"fontName":"g_d0_f1","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.69,"descent":-0.209,"vertical":false}},{"str":"We handle type-unstable loops by allowing traces to","dir":"ltr","width":198.7492224,"height":8.9664,"transform":[8.9664,0,0,8.9664,357.371,293.7402],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"compile that cannot loop back to themselves due to a type mis-","dir":"ltr","width":239.1069888000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,283.77750000000003],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"match. As such traces accumulate, we attempt to connect their loop","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,273.8149],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"edges to form groups of trace trees that can execute without having","dir":"ltr","width":239.10698879999995,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,263.8523],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"to side-exit to the interpreter to cover odd type cases. This is par-","dir":"ltr","width":239.10698879999987,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,253.8896],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"ticularly important for nested trace trees where an outer tree tries to","dir":"ltr","width":239.10698880000012,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,243.927],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"call an inner tree (or in this case a forest of inner trees), since inner","dir":"ltr","width":239.1069888000003,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,233.96429999999998],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"loops frequently have initially undefined values which change type","dir":"ltr","width":239.10698880000015,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,224.00169999999997],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"to a concrete value after the first iteration.","dir":"ltr","width":149.6761152000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,214.03909999999996],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"through the inner loop,","dir":"ltr","width":86.38229760000004,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,187.99499999999995],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"{","dir":"ltr","width":4.6087296,"height":8.9664,"transform":[8.9664,0,0,8.9664,407.0422,187.99499999999995],"fontName":"g_d0_f6","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.75,"descent":-0.194,"vertical":false}},{"str":"i","dir":"ltr","width":3.1561728000000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,411.6499,187.99499999999995],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,418.9543,187.99499999999995],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,430.3544,187.99499999999995],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", α","dir":"ltr","width":10.006502399999997,"height":8.9664,"transform":[8.9664,0,0,8.9664,441.7546,187.99499999999995],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":"}","dir":"ltr","width":4.6087296,"height":8.9664,"transform":[8.9664,0,0,8.9664,451.7631,187.99499999999995],"fontName":"g_d0_f6","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.75,"descent":-0.194,"vertical":false}},{"str":". The","dir":"ltr","width":19.824710400000026,"height":8.9664,"transform":[8.9664,0,0,8.9664,456.37080000000003,187.99499999999995],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"α","dir":"ltr","width":5.908857600000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,479.83910000000003,187.99499999999995],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":"symbol is used to","dir":"ltr","width":66.71898239999992,"height":8.9664,"transform":[8.9664,0,0,8.9664,489.394,187.99499999999995],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"indicate that the trace loops back the tree anchor.","dir":"ltr","width":175.05102720000008,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,178.03239999999994],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"When execution leaves the inner loop, the basic design has two","dir":"ltr","width":227.14581120000005,"height":8.9664,"transform":[8.9664,0,0,8.9664,328.96889999999996,168.06969999999993],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"choices. First, the system can stop tracing and give up on compiling","dir":"ltr","width":239.10698879999995,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,158.10709999999992],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"the outer loop, clearly an undesirable solution. The other choice is","dir":"ltr","width":239.1069888000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,148.1443999999999],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"to continue tracing, compiling traces for the outer loop inside the","dir":"ltr","width":239.10698880000024,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,138.1817999999999],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"inner loop’s trace tree.","dir":"ltr","width":80.17754880000003,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,128.2191999999999],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"For example, the program might exit at","dir":"ltr","width":142.54782719999994,"height":8.9664,"transform":[8.9664,0,0,8.9664,328.96889999999996,118.25649999999989],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"i","dir":"ltr","width":3.1561728000000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,474.1277,118.25649999999989],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":"and record a branch","dir":"ltr","width":72.07192320000001,"height":8.9664,"transform":[8.9664,0,0,8.9664,484.0469,118.25649999999989],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"trace that incorporates the outer loop:","dir":"ltr","width":148.27735680000012,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,108.2938999999999],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"{","dir":"ltr","width":4.6087296,"height":8.9664,"transform":[8.9664,0,0,8.9664,470.34639999999996,108.2938999999999],"fontName":"g_d0_f6","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.75,"descent":-0.194,"vertical":false}},{"str":"i","dir":"ltr","width":3.1561728000000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,474.9541,108.2938999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,482.25849999999997,108.2938999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,493.6586,108.2938999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,505.05879999999996,108.2938999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,516.4589,108.2938999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,527.8589999999999,108.2938999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", α","dir":"ltr","width":10.006502399999997,"height":8.9664,"transform":[8.9664,0,0,8.9664,539.2592,108.2938999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":"}","dir":"ltr","width":4.6087296,"height":8.9664,"transform":[8.9664,0,0,8.9664,549.2677,108.2938999999999],"fontName":"g_d0_f6","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.75,"descent":-0.194,"vertical":false}},{"str":".","dir":"ltr","width":2.2416000000000005,"height":8.9664,"transform":[8.9664,0,0,8.9664,553.8754,108.2938999999999],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"Later, the program might take the other branch at","dir":"ltr","width":191.073984,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0137,98.3311999999999],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"i","dir":"ltr","width":3.1561728000000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,512.1986999999999,98.3311999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":"and then","dir":"ltr","width":32.50320000000006,"height":8.9664,"transform":[8.9664,0,0,8.9664,523.6163999999999,98.3311999999999],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"exit, recording another branch trace incorporating the outer loop:","dir":"ltr","width":239.10698880000015,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.01369999999986,88.3685999999999],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"{","dir":"ltr","width":4.6087296,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.01369999999986,78.4059999999999],"fontName":"g_d0_f6","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.75,"descent":-0.194,"vertical":false}},{"str":"i","dir":"ltr","width":3.1561728000000002,"height":8.9664,"transform":[8.9664,0,0,8.9664,321.6213999999999,78.4059999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,328.92579999999987,78.4059999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,340.3258999999999,78.4059999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,351.72609999999986,78.4059999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,363.12619999999987,78.4059999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,374.5262999999999,78.4059999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,385.92649999999986,78.4059999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", i","dir":"ltr","width":7.253817599999996,"height":8.9664,"transform":[8.9664,0,0,8.9664,397.32659999999987,78.4059999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":", α","dir":"ltr","width":10.006502399999997,"height":8.9664,"transform":[8.9664,0,0,8.9664,408.7266999999999,78.4059999999999],"fontName":"g_d0_f15","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.694,"descent":-0.194,"vertical":false}},{"str":"}","dir":"ltr","width":4.6087296,"height":8.9664,"transform":[8.9664,0,0,8.9664,418.7352999999999,78.4059999999999],"fontName":"g_d0_f6","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.75,"descent":-0.194,"vertical":false}},{"str":". Thus, the outer loop is recorded and","dir":"ltr","width":132.7744512,"height":8.9664,"transform":[8.9664,0,0,8.9664,423.3429999999999,78.4059999999999],"fontName":"g_d0_f2","hasEOL":true,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}},{"str":"compiled twice, and both copies must be retained in the trace cache.","dir":"ltr","width":239.10698880000007,"height":8.9664,"transform":[8.9664,0,0,8.9664,317.0136999999999,68.44329999999991],"fontName":"g_d0_f2","hasEOL":false,"style":{"fontFamily":"sans-serif","ascent":0.678,"descent":-0.216,"vertical":false}}]